var x=Object.defineProperty;var S=(t,e,s)=>e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var i=(t,e,s)=>(S(t,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const r of c)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(c){const r={};return c.integrity&&(r.integrity=c.integrity),c.referrerPolicy&&(r.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?r.credentials="include":c.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(c){if(c.ep)return;c.ep=!0;const r=s(c);fetch(c.href,r)}})();const _="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",T="0123456789",b=4;function A(t){const e=_+T;let s="";for(let n=0;n<t;n++){const c=Math.floor(Math.random()*e.length);s+=e.charAt(c)}return s}function p(t){const e=new Image;return e.src=t,e}class M{constructor(e,s,n){i(this,"id");i(this,"title");i(this,"description");i(this,"completed");i(this,"toggleCompleted",()=>{this.completed=!this.completed});i(this,"setCompleted",(e=!0)=>{this.completed=e});i(this,"getCompleted",()=>this.completed);this.id=A(b),this.title=e,this.description=s,this.completed=n}}const q="data:image/svg+xml,%3csvg%20class=''%20width='100'%20height='100'%20viewBox='0%200%20512%20512'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ccircle%20cx='92'%20cy='256'%20r='28'%20fill='%23929292'%3e%3c/circle%3e%3ccircle%20cx='92'%20cy='132'%20r='28'%20fill='%23929292'%3e%3c/circle%3e%3ccircle%20cx='92'%20cy='380'%20r='28'%20fill='%23929292'%3e%3c/circle%3e%3cpath%20fill='%23929292'%20d='M432%20240H191.5c-8.8%200-16%207.2-16%2016s7.2%2016%2016%2016H432c8.8%200%2016-7.2%2016-16s-7.2-16-16-16zm0%20124H191.5c-8.8%200-16%207.2-16%2016s7.2%2016%2016%2016H432c8.8%200%2016-7.2%2016-16s-7.2-16-16-16zM191.5%20148H432c8.8%200%2016-7.2%2016-16s-7.2-16-16-16H191.5c-8.8%200-16%207.2-16%2016s7.2%2016%2016%2016z'%3e%3c/path%3e%3c/svg%3e",O="data:image/svg+xml,%3csvg%20class=''%20width='25'%20height='25'%20viewBox='0%200%20416%20416'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20d='M208%2028c48.1%200%2093.3%2018.7%20127.3%2052.7S388%20159.9%20388%20208c0%2048.1-18.7%2093.3-52.7%20127.3S256.1%20388%20208%20388c-48.1%200-93.3-18.7-127.3-52.7S28%20256.1%2028%20208c0-48.1%2018.7-93.3%2052.7-127.3S159.9%2028%20208%2028zm0-28C93.1%200%200%2093.1%200%20208s93.1%20208%20208%20208%20208-93.1%20208-208S322.9%200%20208%200z'%20fill='%23929292'%3e%3c/path%3e%3c/svg%3e",I="data:image/svg+xml,%3csvg%20class=''%20width='25'%20height='25'%20viewBox='0%200%20416%20416'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20d='M208%200C93.1%200%200%2093.1%200%20208s93.1%20208%20208%20208%20208-93.1%20208-208S322.9%200%20208%200zm106.5%20150.5L180.8%20284.8h-.1c-1.7%201.7-6.3%205.5-11.6%205.5-3.8%200-8.1-2.1-11.7-5.7l-56-56c-1.6-1.6-1.6-4.1%200-5.7l17.8-17.8c.8-.8%201.8-1.2%202.8-1.2%201%200%202%20.4%202.8%201.2l44.4%2044.4%20122-122.9c.8-.8%201.8-1.2%202.8-1.2%201.1%200%202.1.4%202.8%201.2l17.5%2018.1c1.8%201.7%201.8%204.2.2%205.8z'%20fill='%23929292'%3e%3c/path%3e%3c/svg%3e";var d=(t=>(t[t.ALL=0]="ALL",t[t.COMPLETE=1]="COMPLETE",t[t.INCOMPLETE=2]="INCOMPLETE",t[t.SEARCH=3]="SEARCH",t))(d||{});const f=document.querySelector(".tasks");class H{constructor(e,s){i(this,"list");i(this,"filter");i(this,"query");i(this,"getTaskById",e=>this.list.find(s=>s.id===e)||null);i(this,"getTaskByIndex",e=>this.list[e]||null);i(this,"addTask",e=>(this.list.push(e),this.list));i(this,"getTasks",()=>this.list);i(this,"renderEmptyList",()=>{const e=document.createElement("div");e.classList.add("tasks-empty");const s=document.createElement("div");s.classList.add("tasks-empty__icon");const n=p(q);s.appendChild(n),e.appendChild(s);const c=document.createElement("p");c.classList.add("tasks-empty__text"),c.textContent="You don't have any tasks yet. Create a new one.",e.appendChild(c),f.appendChild(e)});this.list=e,this.filter=s,this.query=""}setQuery(e){this.query=e}getQuery(){return this.query}getFilter(){return this.filter}setFilter(e){this.filter=e}render(){f.innerHTML="";const e=this.getFilter();let s=[];switch(e){case 1:s=this.list.filter(n=>n.completed);break;case 2:s=this.list.filter(n=>!n.completed);break;case 3:this.getQuery()===""&&(s=this.list),s=this.list.filter(n=>n.title.toLowerCase().includes(this.getQuery().toLowerCase()));break;default:s=this.list;break}if(s.length===0){this.renderEmptyList();return}s.forEach(n=>{const c=document.createElement("div");c.classList.add("task");const r=document.createElement("div");r.classList.add("task__content");const o=document.createElement("h3");o.classList.add("task__title"),o.textContent=n.title;const u=document.createElement("p");u.classList.add("task__text"),u.textContent=n.description||"",r.appendChild(o),r.appendChild(u);const E=document.createElement("div"),a=document.createElement("button");a.setAttribute("type","button"),a.classList.add("btn","btn-icon","btn-icon--secondary","complete-btn");let h;n.getCompleted()?h=p(I):h=p(O),a.appendChild(h),a.addEventListener("click",()=>{n.toggleCompleted(),this.render()}),E.appendChild(a),c.appendChild(r),c.appendChild(E),f.appendChild(c)})}}const m=document.querySelector("#modal"),P=document.querySelectorAll(".modal-opener"),N=document.querySelectorAll(".modal-closer"),B=document.querySelector("#add-task"),v=document.querySelector("#modal-add-form"),L=document.querySelector("#search"),y=document.querySelectorAll(".filter-all"),w=document.querySelectorAll(".filter-complete"),k=document.querySelectorAll(".filter-incomplete"),l=new H([],d.ALL);function z(t,e,s){const n=new M(t,e,s);return l.addTask(n),n}function F(t){t.preventDefault();const e=t.target,s=new FormData(e),n=s.get("title"),c=s.get("description")||"";z(n,c,!1),l.render(),e.reset(),C()}function g(t){y.forEach(e=>{e.classList.remove("header__menu-link--active")}),w.forEach(e=>{e.classList.remove("header__menu-link--active")}),k.forEach(e=>{e.classList.remove("header__menu-link--active")}),l.setFilter(t),l.render()}function Q(){if(!m)throw new Error("No modal found");m.classList.remove("modal-hidden")}function C(){if(!m)throw new Error("No modal found");m.classList.add("modal-hidden"),v.reset()}function R(){[B,v].forEach(t=>{t==null||t.addEventListener("submit",F)}),P.forEach(t=>{t.addEventListener("click",Q)}),N.forEach(t=>{t.addEventListener("click",C)}),y.forEach(t=>{t.addEventListener("click",()=>{g(d.ALL),t.classList.add("header__menu-link--active")})}),w.forEach(t=>{t.addEventListener("click",()=>{g(d.COMPLETE),t.classList.add("header__menu-link--active")})}),k.forEach(t=>{t.addEventListener("click",()=>{g(d.INCOMPLETE),t.classList.add("header__menu-link--active")})}),L.addEventListener("input",()=>{l.setQuery(L.value),l.setFilter(d.SEARCH),l.render()})}l.render();R();
